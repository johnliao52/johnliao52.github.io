---
layout: default
title: download and compile android aosp skills
---

<h2>{{page.title}}</h2>

<h3>git</h3>
<p>
	<ul>
		<li>sync specific branch of android code in a loop to overcome network unstable problem </li>
		<p>#!/bin/bash<br>
		PATH=../:$PATH<br>
		./repo sync -j6 --force-sync<br>
		while [$? -ne 0]<br>
			do<br>
			echo '=================== sync failed, re-sync again ====='<br>
			sleep 3<br>
			./repo sync -j6 --force-sync<br>
		done<br>
		<li>fetch all branches of android code in a loop to overcome network unstable problem </li>
		<p>
		
			#!/bin/bash<br>
			PATH=../:$PATH<br>
			./repo forall -c git fetch aosp<br>
			while [$? -ne 0]<br>
				do<br>
				echo '=================== fetch failed, re-fetch again ====='<br>
				sleep 3<br>
				./repo forall -c git fetch aosp<br>
			done<br>
		</p>
		
		<li>make android code in a loop until success, if get similar errors like following, this is normally duo to memory stability issue, try </li>
		<p>#!/bin/bash<br>
			make -j6<br>
			while [ $? -ne 0 ] <br>
			do<br>
				echo "makecmd loop failure!"<br>
				sleep 3<br>
				make -j6<br>
			done<br>
			echo "makecmd loop success!"<br>
		</p>
		<p>
			<plaintext>
				pvmp3_get_scale_factors.cpp:132:6: internal compiler error: Segmentation fault
				 void pvmp3_get_scale_factors(mp3ScaleFactors *scalefac,
					  ^
				Please submit a full bug report,

				CachedDecodingPixelRefTest.cpp
				target  C++: skia_dm <= external/skia/dm/../tests/CanvasStateTest.cpp
				In file included from external/skia/dm/../include/core/SkShader.h:12:0,
								 from external/skia/dm/../src/effects/SkBlurMask.h:12,
								 from external/skia/dm/../tests/BlurTest.cpp:8:
				external/skia/dm/../include/core/SkBitmap.h:772:17: internal compiler error: Segmentation fault
					 uint32_t    fRowBytes;
								 ^
				Please submit a full bug report,
				with preprocessed source if appropriate.

				external/libcxx/include/limits: In instantiation of 'class std::__1::__libcpp_numeric_limits<long unsigned int, true>':
				external/libcxx/include/limits:440:29:   required from 'class std::__1::numeric_limits<long unsigned int>'
				external/libcxx/include/mutex:289:47:   required from here
				external/libcxx/include/limits:241:41: internal compiler error: Segmentation fault
					 static _LIBCPP_CONSTEXPR const bool traps = true;
														 ^
				Please submit a full bug report,
				with preprocessed source if appropriate.


				target  C++: libartd <= art/runtime/verifier/dex_gc_map.cc
				In file included from external/gtest/include/gtest/gtest-param-test.h:193:0,
								 from external/gtest/include/gtest/gtest.h:62,
								 from art/runtime/gc/heap.h:34,
								 from art/runtime/gc/heap-inl.h:20,
								 from art/runtime/mirror/array-inl.h:23,
								 from art/runtime/mirror/object-inl.h:25,
								 from art/runtime/utf.cc:21:
				external/gtest/include/gtest/internal/gtest-param-util-generated.h: In member function 'testing::internal::ValueArray45<T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24, T25, T26, T27, T28, T29, T30, T31, T32, T33, T34, T35, T36, T37, T38, T39, T40, T41, T42, T43, T44, T45>::operator testing::internal::ParamGenerator<T>() const':
				external/gtest/include/gtest/internal/gtest-param-util-generated.h:2578:46: internal compiler error: Illegal instruction
						 static_cast<T>(v24_), static_cast<T>(v25_), static_cast<T>(v26_),
															  ^
				Please submit a full bug report,
				with preprocessed source if appropriate.
			</plaintext>
		</p>
	</ul>
<p/>
<p>{{page.date | date_to_string}}</p>